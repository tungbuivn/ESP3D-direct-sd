<html><head><style>html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-size:10px}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857143;color:#333;background-color:#fff}table{border:0;border-spacing:0;max-width:100%}td{white-space:nowrap;padding:2mm}th{text-align:left}.table>tbody>tr>td,.table>tbody>tr>th,.table>thead>tr>td,.table>thead>tr>th{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #ddd}.table-striped>tbody>tr:nth-of-type(odd){background-color:#f9f9f9}a{position:relative;display:block;padding:10px 15px;text-decoration:none;color:#ccc}.active{color:#fff;background-color:#000}.active a,a:focus,a:hover{color:#fff}.panel{margin-bottom:20px;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.05);box-shadow:0 1px 1px rgba(0,0,0,.05)}.panel-body{padding:15px}.panel-heading{padding:10px 15px;color:#333;background-color:#f5f5f5;border-color:#ddd;border-top-right-radius:3px;border-top-left-radius:3px;border-bottom:1px solid #ddd}.form-control{display:block;width:auto;height:34px;padding:6px 12px;font-size:14px;line-height:1.42857143;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-o-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.form-control:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.form-group{margin-bottom:15px}.btn{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:6px 12px;font-size:14px;line-height:1.42857143;border-radius:4px;-moz-user-select:none;-ms-user-select:none;user-select:none}.btn-primary{color:#fff;background-color:#337ab7;border-color:#2e6da4}.btn-primary.active,.btn-primary.focus,.btn-primary.hover,.btn-primary:active,.btn-primary:focus,.btn-primary:hover{color:#fff;background-color:#286090;border-color:#122b40}.btnimg{cursor:hand;border-radius:6px;border:1px solid #fff}.btnimg:hover{background-color:#f0f0f0;border-color:#6c6c6c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px grey;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px grey}.btnroundimg{cursor:hand;border-radius:30px}.btnroundimg:hover{background-color:#f0f0f0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px grey;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px grey}.blacklink,.blacklink:active{color:#000}.blacklink:hover{color:#000}input[type=file]::-webkit-file-upload-button{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:6px 12px;font-size:14px;line-height:1.42857143;border-radius:4px;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;background-color:#5bc0de;border-color:#46b8da}input[type=file]::-webkit-file-upload-button:focus{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:6px 12px;font-size:14px;line-height:1.42857143;border-radius:4px;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;background-color:#31b0d5;border-color:#1b6d85}input[type=file]::-webkit-file-upload-button:hover{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:6px 12px;font-size:14px;line-height:1.42857143;border-radius:4px;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;background-color:#31b0d5;border-color:#269abc}.panel-footer{padding:10px 15px;color:#31708f;background-color:#f5f5f5;border-color:#ddd;border-top:1px solid #ddd}.panel-footer{padding:10px 15px;color:#31708f;background-color:#f5f5f5;border-color:#ddd;border-top:1px solid #ddd}.modal{display:none;position:fixed;z-index:10000;padding-top:100px;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:rgba(0,0,0,.4)}.modal-content{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-left-radius:10px;border-bottom-right-radius:10px;border:2px solid #337ab7;box-shadow:0 8px 16px 0 rgba(0,0,0,.2);position:relative;margin:auto;padding:0;background-color:#fefefe}.modal-header{padding:2px 16px;color:#0f0f0f;background-color:#f2f2f2;border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:1px solid #cfcfcf}.modal-body{padding:10px 16px}.modal-footer{padding:16px 16px;height:4.5em;color:#0f0f0f;background-color:#f2f2f2;border-top:1px solid #cfcfcf;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.hide_it{display:none}@media (min-width:768px){.modal-content{width:580px}}@media screen and (max-width:767px){.modal-content{width:100%}}</style><title>ESP3D tool page</title></head><body><div class="panel hide_it"><table width="100%"><tr><td><a class="btnimg" href="https://github.com/luc-github/ESP3D/tree/2.1" target="_blank"><svg width="1em" height="1em" viewBox="0 0 1300 1200"><g transform="translate(50,1200) scale(1, -1)"><path d="M600 1174q33 0 74 -5l38 -152l5 -1q49 -14 94 -39l5 -2l134 80q61 -48 104 -105l-80 -134l3 -5q25 -44 39 -93l1 -6l152 -38q5 -43 5 -73q0 -34 -5 -74l-152 -38l-1 -6q-15 -49 -39 -93l-3 -5l80 -134q-48 -61 -104 -105l-134 81l-5 -3q-44 -25 -94 -39l-5 -2l-38 -151 q-43 -5 -74 -5q-33 0 -74 5l-38 151l-5 2q-49 14 -94 39l-5 3l-134 -81q-60 48 -104 105l80 134l-3 5q-25 45 -38 93l-2 6l-151 38q-6 42 -6 74q0 33 6 73l151 38l2 6q13 48 38 93l3 5l-80 134q47 61 105 105l133 -80l5 2q45 25 94 39l5 1l38 152q43 5 74 5zM600 815 q-89 0 -152 -63t-63 -151.5t63 -151.5t152 -63t152 63t63 151.5t-63 151.5t-152 63z"></path></g></svg> <span class="blacklink">Firmware</span></a></td><td><a class="btnimg" href="https://www.github.com/luc-github/ESP3D-WEBUI/tree/2.1" target="_blank"><svg width="1em" height="1em" viewBox="0 0 1300 1200"><g transform="translate(50,1200) scale(1, -1)"><path d="M600 1094q82 0 160.5 -22.5t140 -59t116.5 -82.5t94.5 -95t68 -95t42.5 -82.5t14 -57.5t-14 -57.5t-43 -82.5t-68.5 -95t-94.5 -95t-116.5 -82.5t-140 -59t-159.5 -22.5t-159.5 22.5t-140 59t-116.5 82.5t-94.5 95t-68.5 95t-43 82.5t-14 57.5t14 57.5t42.5 82.5t68 95 t94.5 95t116.5 82.5t140 59t160.5 22.5zM888 829q-15 15 -18 12t5 -22q25 -57 25 -119q0 -124 -88 -212t-212 -88t-212 88t-88 212q0 59 23 114q8 19 4.5 22t-17.5 -12q-70 -69 -160 -184q-13 -16 -15 -40.5t9 -42.5q22 -36 47 -71t70 -82t92.5 -81t113 -58.5t133.5 -24.5 t133.5 24t113 58.5t92.5 81.5t70 81.5t47 70.5q11 18 9 42.5t-14 41.5q-90 117 -163 189zM448 727l-35 -36q-15 -15 -19.5 -38.5t4.5 -41.5q37 -68 93 -116q16 -13 38.5 -11t36.5 17l35 34q14 15 12.5 33.5t-16.5 33.5q-44 44 -89 117q-11 18 -28 20t-32 -12z"></path></g></svg> <span class="blacklink">Interface</span></a></td><td><a class="btnimg" href="https://github.com/luc-github/ESP3D/wiki" target="_blank"><svg width="1em" height="1em" viewBox="0 0 1300 1200"><g transform="translate(50,1200) scale(1, -1)"><path d="M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM588 941q-29 0 -59 -5.5t-63 -20.5t-58 -38.5t-41.5 -63t-16.5 -89.5 q0 -25 20 -25h131q30 -5 35 11q6 20 20.5 28t45.5 8q20 0 31.5 -10.5t11.5 -28.5q0 -23 -7 -34t-26 -18q-1 0 -13.5 -4t-19.5 -7.5t-20 -10.5t-22 -17t-18.5 -24t-15.5 -35t-8 -46q-1 -8 5.5 -16.5t20.5 -8.5h173q7 0 22 8t35 28t37.5 48t29.5 74t12 100q0 47 -17 83 t-42.5 57t-59.5 34.5t-64 18t-59 4.5zM675 400h-150q-10 0 -17.5 -7.5t-7.5 -17.5v-150q0 -10 7.5 -17.5t17.5 -7.5h150q10 0 17.5 7.5t7.5 17.5v150q0 10 -7.5 17.5t-17.5 7.5z"></path></g></svg> <span class="blacklink">Help</span></a></td><td style="width:100%"></td><td onclick="RL();" id="loginicon"><a class="btnimg"><svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200"><g transform="translate(50,1200) scale(1, -1)"><path fill="black" d="M900 800v200q0 83 -58.5 141.5t-141.5 58.5h-300q-82 0 -141 -59t-59 -141v-200h-100q-41 0 -70.5 -29.5t-29.5 -70.5v-600q0 -41 29.5 -70.5t70.5 -29.5h900q41 0 70.5 29.5t29.5 70.5v600q0 41 -29.5 70.5t-70.5 29.5h-100zM400 800v150q0 21 15 35.5t35 14.5h200 q20 0 35 -14.5t15 -35.5v-150h-300z"/></g></svg></a></td><td style="text-align:right"><span id="FWVERSION" class="blacklink"></span></td></tr></table></div><div class="panel"><center><h2 id="MSG"></h2></center></div><div class="panel hide_it" id="FILESYSTEM"><div class="panel-heading">SDCard Filesystem</div><div class="panel-body"><input type="file" id="file-select" name="myfiles[]" multiple="multiple"> <input class="btn btn-primary" type="button" id="upload-button" onclick="Sendfile();" value="Upload">&nbsp;&nbsp;<progress style="visibility:hidden" name="prg" id="prg" max="100"></progress><br><br><div class="panel"><div class="panel-body"><table><tr><td width="0%"><input class="btn btn-primary" type="button" onclick="SendCommand('list','all');" value="Refresh"></td><td width="0%"><div onclick="Createdir()" class="btnimg"><svg width="40" height="40" viewBox="0 0 40 40"><rect x="5" y="10" width="30" height="20" rx="2" ry="2" fill="#31b0d5"/><rect x="20" y="5" width="15" height="15" rx="2" ry="2" fill="#31b0d5"/><text x="15" y="25" font-size="18" font-weight="800" fill="white">+</text></svg></div></td><td width="100%"><div id="path" class="info">&nbsp;</div></td></tr></table><table class="table table-striped" style="border:1px"><thead><tr><th width="0%">Type</th><th>Name</th><th>Size</th><th id="FS_time">Time</th><th width="0%"></th><th width="100%"></th></tr></thead><tbody id="file_list"></tbody></table></div><div class="panel-footer" id="status"></div></div></div></div><div class="panel hide_it" id="FWUPDATE"><div class="panel-heading">Firmware Update</div><div class="panel-body"><table><tr><td><input type="file" id="fw-select" name="myfiles[]"></td><td><input class="btn btn-primary" type="button" id="ubut" onclick="Uploadfile();" value="Update"></td><td><progress style="visibility:hidden" name="prgfw" id="prgfw" max="100"></progress></td><td><span id="msg" style="visibility:hidden">Restarting, please wait....</span><span id="counter"></span></td></tr></table></div></div><div id="loginpage" class="modal"><div class="modal-content"><div class="modal-header"><h3>Identification</h3></div><div class="modal-body"><span><span class="modal-text" translate>User:</span> <input class="form-control" type="text" id="lut" style="width:auto"></span><hr><span><span class="modal-text" translate>Password:</span> <input class="form-control" type="password" id="lpt" style="width:auto"></span><br></div><div class="modal-footer"><input type="button" class="btn btn-primary" onclick="SLR()" value="Submit"></div></div></div><script>var ws_source,xmlhttpupload,currentpath="/",authentication=!1,websocket_port=0,websocket_IP="",async_webcommunication=!1,page_id="",log_off=!1,websocket_started=!1,esp_error_message="",esp_error_code=0,typeupload=0;function navbar(){var e="<table><tr>",t=currentpath.split("/"),n="/",o=1;for(e+="<td class='btnimg'  onclick=\"currentpath='/'; SendCommand('list','all');\">/</td>";o<t.length-1;)e+="<td class='btnimg' onclick=\"currentpath='"+(n+=t[o]+"/")+"'; SendCommand('list','all');\">"+t[o]+"</td><td>/</td>",o++;return e+="</tr></table>"}function trash_icon(){return"<svg width='24' height='24' viewBox='0 0 128 128'><rect x='52' y='12' rx='6' ry='6' width='25' height='7' style='fill:red;' /><rect x='52' y='16' width='25' height='2' style='fill:white;' /><rect x='30' y='18' rx='6' ry='6' width='67' height='100' style='fill:red;' /><rect x='20' y='18' rx='10' ry='10' width='87' height='14' style='fill:red;' /><rect x='20' y='29' width='87' height='3' style='fill:white;' /><rect x='40' y='43' rx='7' ry='7' width='7' height='63' style='fill:white;' /><rect x='60' y='43' rx='7' ry='7' width='7' height='63' style='fill:white;' /><rect x='80' y='43' rx='7' ry='7' width='7' height='63' style='fill:white;' /></svg>"}function back_icon(){return"<svg width='24' height='24' viewBox='0 0 24 24'><path d='M7,3 L2,8 L7,13 L7,10 L17,10 L18,11 L18,15 L17,16 L10,16 L9,17 L9,19 L10,20 L20,20 L22,18 L22,8 L20,6 L7,6 z' stroke='black' fill='white' /></svg>"}function select_dir(e){currentpath+=e+"/",SendCommand("list","all")}function compareStrings(e,t){return(e=e.toLowerCase())<(t=t.toLowerCase())?-1:t<e?1:0}function dispatchfilestatus(e){var t,n="",n="&nbsp;&nbsp;Status: "+e.status;n=(n=(n+="&nbsp;&nbsp;|&nbsp;&nbsp;Total space: "+e.total)+"&nbsp;&nbsp;|&nbsp;&nbsp;Used space: "+e.used)+"&nbsp;&nbsp;|&nbsp;&nbsp;Occupation: <meter min='0' max='100' high='90' value='"+e.occupation+"'></meter>&nbsp;"+e.occupation+"%",document.getElementById("status").innerHTML=n,n="","/"!=currentpath&&(t=currentpath.lastIndexOf("/",currentpath.length-2),n+="<tr style='cursor:hand;' onclick=\"currentpath='"+currentpath.slice(0,t+1)+"'; SendCommand('list','all');\"><td >"+back_icon()+"</td><td colspan='4'> Up..</td></tr>"),e.files.sort(function(e,t){return compareStrings(e.name,t.name)});for(var o=!1,l=0;l<e.files.length;l++)"-1"!=String(e.files[l].size)&&(n=(n=(n+="<TR><td><svg height='24' width='24' viewBox='0 0 24 24' >    <path d='M1,2 L1,21 L2,22 L16,22 L17,21 L17,6 L12,6 L12,1  L2,1 z' stroke='black' fill='white' /><line x1='12' y1='1' x2='17' y2='6' stroke='black' stroke-width='1'/></svg></td>")+'<TD class=\'btnimg\' style="padding:0px;"><a href="'+e.path+e.files[l].name+'" target=_blank><div class="blacklink">')+e.files[l].name,"index.html.gz"!=e.files[l].name&&"index.html"!=e.files[l].name||0,n=(n+="</div></a></TD><TD>")+e.files[l].size+"</TD>",e.files[l].hasOwnProperty("time")?(o=!0,n=(n+="<TD>")+e.files[l].time+"</TD>"):n+="<TD></TD>",n=(n+="<TD width='0%'><div class=\"btnimg\" onclick=\"Delete('"+e.files[l].name+"')\">")+trash_icon()+"</div></TD><td></td></TR>");for(var i=0;i<e.files.length;i++)"-1"==String(e.files[i].size)&&(n=(n=(n+="<TR><td><svg height='24' width='24' viewBox='0 0 24 24' ><path d='M19,11 L19,8 L18,7 L8,7 L8,5 L7,4 L2,4 L1,5 L1,22 L19,22 L20,21 L23,11 L5,11 L2,21 L1,22' stroke='black' fill='white' /></svg></td>")+"<TD  class='btnimg blacklink' style='padding:10px 15px;' onclick=\"select_dir('"+e.files[i].name+"');\">")+e.files[i].name+"</TD><TD></TD><TD></TD>",e.files[i].hasOwnProperty("time"),o=!0,n=(n+="<TD width='0%'><div class=\"btnimg\" onclick=\"Deletedir('"+e.files[i].name+"')\">")+trash_icon()+"</div></TD><td></td></TR>");document.getElementById("FS_time").innerHTML=o?"":"Time",document.getElementById("file_list").innerHTML=n,document.getElementById("path").innerHTML=navbar()}function Delete(e){SendCommand("delete",e)}function Deletedir(e){SendCommand("deletedir",e)}function Createdir(){var e=prompt("Directory name","");null!=e&&SendCommand("createdir",e.trim())}function SendCommand(e,t){var n=new XMLHttpRequest,e="/files?action="+e;document.getElementById("MSG").innerHTML="Connecting...",e=(e+="&filename="+encodeURI(t))+"&path="+encodeURI(currentpath),n.onreadystatechange=function(){var e;4==n.readyState&&(200==n.status?(dispatchfilestatus(e=JSON.parse(n.responseText)),document.getElementById("MSG").innerHTML=e.status||"done"):(401==n.status?RL:(console.log(n.status),FWError))())},n.open("GET",e,!0),n.send()}function Sendfile(){var e=document.getElementById("file-select").files;if(0!=e.length){document.getElementById("MSG").innerHTML="Uploading...",document.getElementById("upload-button").value="Uploading...",document.getElementById("prg").style.visibility="visible";var t=new FormData;t.append("path",currentpath);for(var n=0;n<e.length;n++){var o=e[n],l=currentpath+o.name+"S";t.append(l,o.size),t.append("myfiles[]",o,currentpath+o.name)}(xmlhttpupload=new XMLHttpRequest).open("POST","/files",!0),xmlhttpupload.upload.addEventListener("progress",function(e){e.lengthComputable&&(e=e.loaded/e.total*100,document.getElementById("prg").value=e,document.getElementById("upload-button").value="Uploading ..."+e.toFixed(0)+"%")},!1),typeupload=1,xmlhttpupload.onload=function(){200===xmlhttpupload.status?(document.getElementById("upload-button").value="Upload",document.getElementById("prg").style.visibility="hidden",document.getElementById("file-select").value="",document.getElementById("MSG").innerHTML="Done !",dispatchfilestatus(JSON.parse(xmlhttpupload.responseText))):uploadError()},xmlhttpupload.send(t)}}function padNumber(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}function getPCTime(){var e=new Date;return e.getFullYear()+"-"+padNumber(e.getMonth()+1,2)+"-"+padNumber(e.getDate(),2)+"-"+padNumber(e.getHours(),2)+"-"+padNumber(e.getMinutes(),2)+"-"+padNumber(e.getSeconds(),2)}function HideAll(e){log_off=!0,websocket_started&&ws_source.close(),document.title=document.title+"(disconnected)",document.getElementById("MSG").innerHTML=e,document.getElementById("FILESYSTEM").style.display="none",document.getElementById("FWUPDATE").style.display="none"}function FWError(){HideAll("Failed to communicate with FW!")}function FWOk(){document.getElementById("MSG").innerHTML="Connected",document.getElementById("FILESYSTEM").style.display="block"}function InitUI(){var i=new XMLHttpRequest,e="/command?commandText="+encodeURI("[ESP800]");async_webcommunication=authentication=!1,console.log("Init UI"),i.onreadystatechange=function(){if(4==i.readyState){var e=!1;if(200==i.status){var t=0,n=i.responseText.split("#");if(console.log(i.responseText),n.length<3)e=!0;else{for(var o=0;o<n.length;o++){var l=n[o].split(":");"FW version"==l[0].trim()&&(document.getElementById("FWVERSION").innerHTML="v"+l[1],t++),"authentication"==l[0].trim()&&("no"==l[1].trim()?(authentication=!1,document.getElementById("loginicon").style.visibility="hidden"):(authentication=!0,document.getElementById("loginicon").style.visibility="visible"),t++),"webcommunication"==l[0].trim()&&(websocket_port=l[2].trim(),websocket_IP=l[3].trim(),startSocket(),t++),"hostname"==l[0].trim()&&(document.title=l[1].trim(),t++)}4==t?FWOk():e=!0}}else 401==i.status?RL():(e=!0,console.log(i.status));e&&FWError()}},i.open("GET",e,!0),i.send()}function startSocket(){websocket_started&&ws_source.close(),(ws_source=async_webcommunication?new WebSocket("ws://"+websocket_IP+":"+websocket_port+"/ws",["arduino"]):new WebSocket("ws://"+websocket_IP+":"+websocket_port,["arduino"])).binaryType="arraybuffer",ws_source.onopen=function(e){console.log("WS"),websocket_started=!0},ws_source.onclose=function(e){websocket_started=!1,console.log("~WS"),log_off||setTimeout(startSocket,3e3)},ws_source.onerror=function(e){console.log("WS",e)},ws_source.onmessage=function(e){e.data instanceof ArrayBuffer||2<=(e=e.data.split(":")).length&&("currentID"==e[0]&&(page_id=e[1],console.log("ID "+page_id)),"activeID"==e[0]&&page_id!=e[1]&&HideAll("It seems you are connect from another location, your are now disconnected"),"ERROR"==e[0])&&(esp_error_message=e[2],esp_error_code=e[1],console.log(e[2]+" code:"+e[1]),uploadError(),xmlhttpupload.abort())}}function uploadError(){0!=esp_error_code?(alert("Update failed("+esp_error_code+"): "+esp_error_message),esp_error_code=0):alert("Update failed!"),1==typeupload?(document.getElementById("upload-button").value="Upload",document.getElementById("prg").style.visibility="hidden",document.getElementById("file-select").value="",SendCommand("list","all")):location.reload()}function Uploadfile(){if(confirm("Confirm Firmware Update ?")){var e=document.getElementById("fw-select").files;if(0!=e.length){document.getElementById("ubut").style.visibility="hidden",document.getElementById("fw-select").style.visibility="hidden",document.getElementById("msg").style.visibility="visible",document.getElementById("msg").innerHTML="",document.getElementById("FILESYSTEM").style.display="none",document.getElementById("prgfw").style.visibility="visible";for(var t=new FormData,n=0;n<e.length;n++){var o=e[n],l="/"+o.name+"S";t.append(l,o.size),t.append("myfile[]",o,"/"+o.name)}typeupload=0,(xmlhttpupload=new XMLHttpRequest).open("POST","/updatefw",!0),xmlhttpupload.addEventListener("progress",function(e){e.lengthComputable&&(e=e.loaded/e.total*100,document.getElementById("prgfw").value=e,document.getElementById("msg").innerHTML="Uploading ..."+e.toFixed(0)+"%")},!1),xmlhttpupload.onload=function(){var e,t,n;200===xmlhttpupload.status?(document.getElementById("ubut").value="Upload",document.getElementById("msg").innerHTML="Restarting, please wait....",document.getElementById("counter").style.visibility="visible",document.getElementById("ubut").style.visibility="hidden",document.getElementById("ubut").style.width="0px",document.getElementById("fw-select").value="",document.getElementById("fw-select").style.visibility="hidden",document.getElementById("fw-select").style.width="0px","1"!=(e=JSON.parse(xmlhttpupload.responseText)).status&&"4"!=e.status&&"1"!=e.status||uploadError(),"2"==e.status?alert("Update canceled!"):"3"==e.status?(t=0,document.getElementById("prgfw").max=40,n=setInterval(function(){t+=1,document.getElementById("prgfw").value=t,document.getElementById("counter").innerHTML=41-t,40<t&&(clearInterval(n),location.reload())},1e3)):uploadError()):uploadError()},xmlhttpupload.send(t)}}}function RL(){document.getElementById("loginpage").style.display="block"}function SLR(){document.getElementById("loginpage").style.display="none";var e=document.getElementById("lut").value.trim(),t=document.getElementById("lpt").value.trim(),e="/login?USER="+encodeURIComponent(e)+"&PASSWORD="+encodeURIComponent(t)+"&SUBMIT=yes",n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(200!=n.status?401==n.status?RL():(FWError(),console.log(n.status)):InitUI())},n.open("GET",e,!0),n.send()}window.onload=function(){InitUI()};</script></body></html>